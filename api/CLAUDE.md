# ApexMath — 峰數學能力檢測平台

## 專案概述

「峰數學能力檢測平台」是一套數學能力診斷系統，核心圍繞三大要素：**學生**、**知識點**、**數學素養**。
系統透過測驗卷評量學生的知識點能力與數學素養，再由 AI 產出弱點分析與強化建議。

## 技術棧

- **後端框架**：FastAPI (Python 3.13)
- **虛擬環境**：`.venv/`
- **IDE**：PyCharm (`.idea/`)
- **入口檔案**：`main.py`

## 領域模型

### 核心實體

| 實體 | 屬性 | 說明 |
|------|------|------|
| **學生 (Student)** | 學年、知識點清單、數學素養能力分佈 | 受測對象，記錄已習得能力 |
| **知識點 (KnowledgePoint)** | 名稱、前後置關係 | 如正整數、小數、分數，知識點之間具有承先啟後的依賴關係 |
| **數學素養 (MathLiteracy)** | 名稱 | 概念理解、計算流暢度、情境策略與脈絡素養、邏輯推理 |
| **題目組 (QuestionGroup)** | 知識點(含分數)、數學素養 | 每題涵蓋特定知識點，解題過程可訓練特定數學素養 |
| **測驗卷 (Exam)** | 學年門檻、題組清單、檔案連結 | 需滿足學年條件才可使用，包含多個題目組 |
| **AI分析 (AIAnalysis)** | 弱點分析、強化建議 | 根據知識點能力+數學素養雷達圖產出 |

### 知識點能力（九大類 + 資優挑戰）

能力值範圍：**0 ~ 5 分**

| # | 知識點類別 | 測驗卷對應單元 |
|---|----------|-------------|
| 1 | 正整數 | 一、正整數運算思維 (5題) |
| 2 | 小數 | 二、小數思維 (5題) |
| 3 | 分數 | 三、分數思維 (5題) |
| 4 | 容積 | 四、容積與面積問題 (4題) |
| 5 | 距離問題 | 五、距離問題與單位換算 (5題) |
| 6 | 時間問題 | 六、時間問題 (5題) |
| 7 | 解題策略 | 七、應用問題解題策略 (5題) |
| 8 | 規律推演 | 八、規律推演 (5題) |
| 9 | 面積/立方體 | 九、面積與立方體問題 (2大題) |
| 10 | 資優挑戰 | 資優思維 (3題) |

### 數學素養能力（雷達圖四象限）

| 象限 | 說明 |
|------|------|
| 概念理解 | 對數學概念的掌握程度 |
| 計算流暢度 | 運算的正確性與效率 |
| 情境策略與脈絡素養 | 將數學應用於實際情境的能力 |
| 邏輯推理 | 分析規律、推導結論的能力 |

各題目組解題時會對應給予各素養維度的分數。

## 分析流程

```
測驗卷（學生作答）
    │
    ├──→ 知識點能力評估（長條圖，0~5分 × 10類）
    │         │
    │         └──→ AI 分析與建議
    │                   ├─ 弱點分析
    │                   └─ 強化建議
    │
    └──→ 數學素養能力評估（雷達圖，4象限）
              │
              └──→ AI 分析與建議（同上合併）
```

## 分析報告輸出格式

報告包含三大區塊（參照「體檢表格形狀.pdf」模板）：
1. **各項知識點能力**：長條圖，X軸為10大知識點類別，Y軸為0~5分
2. **數學素養能力雷達圖**：四象限菱形圖（概念理解、計算流暢度、情境策略與脈絡素養、邏輯推理）
3. **分析與建議**：文字區塊，包含 (1) 弱點分析 (2) 強化建議

## 測驗卷結構（以小五入班檢測為參考範例）

- **適用對象**：小四下學期完 ~ 小五上學期完
- **測驗時間**：基本 50 分鐘，資優挑戰延長至 60 分鐘
- **題目設計**：九大單元各 4~5 題，由簡至難
- **評量方式**：老師根據學生的計算流程與解題歷程判斷知識點掌握程度
- **題型涵蓋**：填充、選擇、判斷對錯、應用題（含列算式）、圖形觀察

### 各單元題目示例摘要

- **正整數**：位值組合、四則運算、運算定律辨析、列式應用題
- **小數**：位值理解、加減計算、倍數推理、乘法應用
- **分數**：假分數塗色、分數比較、帶分數四則、周長差計算
- **容積**：公升毫升換算與運算、複合應用
- **距離**：公里公尺換算、多步驟路程問題
- **時間**：時間單位換算、經過時間、跨日推算
- **解題策略**：分期付款、存錢規劃、混合均分、接合問題
- **規律推演**：圖形排列規律、月曆推理、座位邏輯、數字卡排列、自訂運算符號
- **面積/立方體**：組合圖形面積計算、立方體體積數算
- **資優**：巧算、複合四則、坐標平面規律

## 開發注意事項

- 知識點之間有**前後置依賴關係**（如：先學正整數 → 再學小數 → 再學分數），系統需建模此關係
- 每道題目同時關聯「知識點」與「數學素養」，解題歷程決定給分
- AI 分析需整合知識點能力（量化）與數學素養（雷達圖）兩套數據
- 測驗卷需支援不同學年，具備學年門檻控制
- 報告生成需支援圖表（長條圖 + 雷達圖）+ 文字（AI 建議）